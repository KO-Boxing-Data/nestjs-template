# After cloning

1. `npm update && npm audit fix` to update dependencies

2. `npm install` to install default dependencies

3. `npm install <your required packages>` to install the packages you need (use `npm install --save-dev` to save the
   package as dev dependency)

4. Update this file (fill in details below and remove these instructions)

# Template microservice

This microservice is intended to **...**

## Service consumption

The service can be consumed as **...**

### Validation errors

In case the input is not valid, an object like the following will be returned

```json
{
    "errors": [
        {
            "message": "Bad Request Exception",
            "extensions": {
                "code": "BAD_USER_INPUT",
                "response": {
                    "statusCode": 400,
                    "message": [
                        "email must be an email",
                        "plainPassword must be longer than or equal to 8 characters"
                    ],
                    "error": "Bad Request"
                }
            }
        }
    ],
    "data": null
}
```

**Note that, in such cases the HTTP response may have 200 as status code**

Therefore, the client should check the `errors` array in the GraphQL response instead of the status code
to handle errors. In general, ignore HTTP status code.

### Server Errors

If there was an error while processing the request, an object like the following will be returned

```json
{
    "errors": [
        {
            "message": "Database error",
            "code": "E_DB",
            "name": "ResolverException"
        }
    ],
    "data": null
}
```

You can query the list of possible error codes in **...**


## Data

### PostgreSQL

Uses the following tables:

**...**

With **...** permissions

## Documentation

This repo uses GraphQL, so you can query all documentation from the
autogenerated file [src/schemas.graphql](src/schemas.graphql).

If you run the app in development mode (`npm run start` does so by default) you can go to
http://localhost:7700/graphql to enter the GraphQL playground and query documentation or make some queries.

## Source code

### .env

Files you should create inside the project root directory:

- `.env`: Environment file for **development**
- `.env.prod`: Environment file for **production**

`.env.example` contains the example keys and values every `.env` file should contain

## Testing

To successfully run the tests you must create or have a test user
and place their info in the ./test/utils.ts file: `TEST_EXPERT`, `TEST_ADMIN` or `TEST_EDITOR`
in order to execute correctly the queries and updates tests.

Be careful, because some tests can delete, modify the defined user. In addition, some other tests will
add users to test that some functionalities of the microservice work correctly